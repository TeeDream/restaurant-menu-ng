<mat-drawer-container class="sidenav-container" autosize>
  <mat-drawer #drawer class="sidenav" mode="over">
    <app-product-filtration
      (productFilters)="menuCategoriesHandler($event)"
      [isAdmin]="isAdmin"
    ></app-product-filtration>
  </mat-drawer>

  <div class="sidenav-content">
    <div class="search-filter-wrapper">
      <div class="spacer"></div>
      <div class="search-filter">
        <app-product-search
          (filter)="menuQueryHandler($event)"
        ></app-product-search>
        <button type="button" mat-icon-button (click)="drawer.toggle()">
          <mat-icon>filter_list</mat-icon>
        </button>
      </div>
      <div class="spacer"></div>
    </div>

    <ng-container *ngIf="storeCategories$ | async as storeCategories">
      <ng-container *ngIf="isAdmin && isEditing">
        <app-create-product-btn
          [categories]="storeCategories"
        ></app-create-product-btn>
      </ng-container>
    </ng-container>

    <ng-container *ngIf="storeProducts$ | async as products">
      <ng-container *ngIf="storeHotProducts$ | async as hotProducts">
        <ng-container *ngIf="storeCategories$ | async as storeCategories">
          <ng-container *ngIf="isFiltersEmpty$ | async">
            <div class="category-title">Category: Hot</div>

            <div class="product-wrapper">
              <app-product-item
                *ngFor="let product of hotProducts"
                [product]="product"
                [isAuth]="isAuth$ | async"
                [isAdmin]="isAdmin"
                [isEditing]="isEditing"
                [categories]="storeCategories"
              ></app-product-item>
            </div>
          </ng-container>
        </ng-container>
      </ng-container>

      <ng-container
        *ngFor="let category of storeCategories$ | async as storeCategories"
      >
        <ng-container *ngIf="isAnyProductsWithinCategory(category, products)">
          <div class="category-title">
            Category: {{ category.name | uppercase }}
          </div>

          <div class="product-wrapper">
            <ng-container *ngFor="let product of products">
              <app-product-item
                *ngIf="product.categoryId === category.id"
                [product]="product"
                [isAuth]="isAuth$ | async"
                [isAdmin]="isAdmin"
                [isEditing]="isEditing"
                [categories]="storeCategories"
              >
              </app-product-item>
            </ng-container>
          </div>
        </ng-container>
      </ng-container>
    </ng-container>
  </div>
</mat-drawer-container>
